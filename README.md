# PizzaStore

Αρχικά, δημιουργούμε μεταβλητές για να μετράμε το πλήθος των υπαλλήλων που είναι διαθέσιμοι ,τις επιτυχημένες και αποτυχημένες παραγγελίες ,των αριθμό από διαφορετικά είδη πίτσας τα οποία έχουν αγοραστεί , καθώς και τα συνολικά έσοδα. Έπειτα, φτιάχνουμε mutexes και μεταβλητές συνθήκης για να απαγορεύουμε στα νήματα να αλλάζουν τις τιμές των global μεταβλητών ταυτόχρονα και να προκύπτουν προβλήματα. Εκτός από αυτό, υπάρχουν μεταβλητές για το συνολικό χρόνο εξυπηρέτησης ,το μέγιστο χρόνο εξυπηρέτησης , το συνολικό χρόνο κρυώματος και το μέγιστο χρόνο κρυώματος.
Στη main,με τη χρήση της εντολής pthread_mutex_init αρχικοποιούμε τα mutexes και στη συνέχεια δημιουργούμε τα νήματα των πελατών με τη pthread_create,, καλώντας τη συνάρτηση customer_routine για να ξεκινήσει η διαδικασία της εξυπηρέτησης. Χρησιμοποιούμε τη συνάρτηση sleep(rand_r(&seed) % time_orderhigh + 1) για να προσομοιώσουμε τον χρόνο που περιμένουμε μέχρι την εμφάνιση του επόμενου πελάτη. Σε περίπτωση αποτυχίας δημιουργίας του νήματος του πελάτη ,εμφανίζουμε κατάλληλο μήνυμα.
Στην customer_routine, έχουμε φτιάξει βρόγχους while μέσα στους οποίους ελέγχουμε αν παραβιάζονται ορισμένες συνθήκες (π.χ. δεν υπάρχουν διαθέσιμοι τηλεφωνητές) και εμποδίζουμε προσωρινά την εκάστοτε παραγγελία να εκτελεστεί περαιτέρω. Κάθε φορά που επεξεργαζόμαστε κάποια κοινή(global) μεταβλητή ,χρησιμοποιούμε τις εντολές lock και unlock της βιβλιοθήκης pthread για να μην αφήσουμε πολλά νήματα να την επεξεργαστούν ταυτοχρόνως, οδηγώντας σε εσφαλμένα αποτελέσματα. Όταν αποδεσμεύεται μία μεταβλητή, στέλνουμε σήμα στην αντίστοιχη μεταβλητή συνθήκης(pthread_cond_signal) και έτσι κάποιο άλλο νήμα μπορεί να αποκτήσει πρόσβαση σε αυτήν. Με αυτόν τον τρόπο, έχουμε πολυνηματική εκτέλεση του προγράμματος και ως εκ τούτου το πρόγραμμα αυτό εκτελείται γρηγορότερα. Τέλος, λαμβάνοντας υπόψη την περίπτωση αποτυχίας πληρωμής, εκτυπώνουμε αντίστοιχο μήνυμα στον χρήστη.
